<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SAPD License Application — BBCode Converter</title>
  <style>
    :root{
      --bg:#071129; --card:#0f1b2b; --accent:#1e90ff; --muted:#9fb2c8; --danger:#ff6b6b;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#07102a);color:#e6f0fb;padding:28px}
    .container{max-width:1100px;margin:0 auto}
    header{display:flex;gap:16px;align-items:center;margin-bottom:14px}
    .logo{width:64px;height:64px;background:linear-gradient(180deg,#fff,#dbeeff);border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,.5);overflow:hidden}
    .logo img{width:56px;height:56px;object-fit:contain;display:block}
    h1{margin:0;font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

    .card{background:linear-gradient(180deg,var(--card),#071626);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.6)}
    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    @media(max-width:920px){ .grid{grid-template-columns:1fr} }

    .section{background:var(--glass);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,.03)}
    .section h2{margin:0 0 8px;font-size:14px;color:var(--muted)}
    .field{margin-top:10px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="text"], input[type="file"], textarea, select {
  background:rgba(255,255,255,0.05); /* semitransparan biar keliatan beda */
  border:1px solid rgba(255,255,255,.06);
  padding:10px 12px;
  border-radius:8px;
  color:#eaf6ff;
  width:100%;
  font-size:14px;
  appearance:none;           /* hilangkan gaya bawaan browser */
  -webkit-appearance:none;
  -moz-appearance:none;
}

select {
  background-color:#0f1b2b;  /* warna dropdown */
  color:#eaf6ff;             /* teks */
}

option {
  background-color:#0f1b2b;  /* latar item dropdown */
  color:#eaf6ff;             /* warna teks dropdown */
}

    textarea{min-height:92px;resize:vertical}
    .row{display:flex;gap:10px}
    .small{flex:1}
    .muted{color:var(--muted);font-size:13px}

    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    button{background:var(--accent);border:none;padding:10px 14px;border-radius:8px;color:#02233d;cursor:pointer;font-weight:700}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,.06);color:var(--muted)}
    button:disabled{opacity:.5;cursor:not-allowed}

    #result{margin-top:12px;background:rgba(0,0,0,0.25);padding:10px;border-radius:8px;color:var(--muted);white-space:pre-wrap;font-family:monospace;font-size:13px;max-height:320px;overflow:auto}

    .status{font-size:13px;color:var(--muted);margin-top:8px}
    a.link{color:#8ef0c1;text-decoration:none;word-break:break-all}
    .note{font-size:12px;color:var(--muted);margin-top:6px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" title="SAPD Logo">
        <img src="https://sapdssrp.github.io/assets/brand/sapd.png" alt="SAPD">
      </div>
      <div>
        <h1>SAPD License Application Form</h1>
        <p class="lead">Ini adalah platform permudah kalian untuk membuat lisensi truck yang dikembangkan oleh YT : YudaKyojin.</p>
      </div>
    </header>

    <div class="card">
      <div class="grid">
        <!-- LEFT: Personal Information -->
        <div class="section">
          <h2>Personal Information</h2>

          <div class="field">
            <label for="fullname">Nama Lengkap</label>
            <input id="fullname" type="text" placeholder="Firstname Lastname" />
          </div>

          <div class="field">
            <label for="gender">Jenis Kelamin</label>
            <select id="gender">
              <option value="">-- Pilih Jenis Kelamin --</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="row" style="margin-top:10px">
            <div class="field small">
              <label for="dob">Tanggal Lahir</label>
              <input id="dob" type="text" placeholder="DD/MM/YYYY" maxlength="10" />
            </div>
            <div class="field small">
              <label for="phone">Nomor HP</label>
              <input id="phone" type="text" placeholder="08123456789" />
            </div>
          </div>

          <div class="field">
            <label for="address">Alamat</label>
            <textarea id="address" placeholder="Isi alamat di sini"></textarea>
          </div>

          <div class="field">
            <label for="licenseFile">Licenses (Upload SS /showlic anda)</label>
            <input id="licenseFile" type="file" accept="image/*" />
            <div id="uploadStatus" class="status"></div>
            <div class="note">Upload image akan dikirim ke Imgur automatis, cukup upload di sini saja.</div>
          </div>
        </div>

        <!-- RIGHT: Declaration + action -->
        <div class="section">
          <h2>Declaration & Action</h2>

          <div class="field">
            <label for="date">Tanggal Sekarang</label>
            <input id="date" type="text" placeholder="DD/MM/YYYY" maxlength="10" />
          </div>

          <div class="field">
            <label for="signame">Nama (tanda tangan)</label>
            <input id="signame" type="text" placeholder="Firstname_Lastname" />
          </div>

          <div class="field" style="margin-top:12px">
            <div class="controls">
              <button id="btnConvert">Convert to BBCode</button>
              <button id="btnCopy" class="ghost" type="button">Copy BBCode</button>
            </div>
            <div id="result" aria-live="polite">Hasil BBCode akan muncul di sini setelah Convert.</div>
          </div>

          <div class="field" style="margin-top:12px">
            <div class="muted">Preview / Tips</div>
            <div class="note">Kalian telah setuju dengan persyaratan jika menanyakan dan meminta cepat diterima lisensi anda di 911 maupun 666, maka akan kami denied dengan paksa.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ============================
   Config: ganti Client ID Imgur di sini
   ============================ */
const IMGUR_CLIENT_ID = "894beeef6cd80f4"; // <-- GANTI DENGAN CLIENT-ID KAMU

/* State */
let licenseURL = "";

/* Helper: show upload status (dengan detail error jika ada) */

function setStatus(html) {
  document.getElementById('uploadStatus').innerHTML = html;
}

document.getElementById('licenseFile').addEventListener('change', async function () {
  const f = this.files[0];
  if (!f) return;
  setStatus("Uploading to Imgur...");
  const form = new FormData();
  form.append('image', f);

  try {
    const res = await fetch('https://api.imgur.com/3/image', {
      method: 'POST',
      headers: { Authorization: 'Client-ID ' + IMGUR_CLIENT_ID },
      body: form
    });
    const json = await res.json();
    if (res.ok && json && json.success) {
      licenseURL = json.data.link;
      setStatus(`✅ Uploaded: <a class="link" href="${licenseURL}" target="_blank">${licenseURL}</a>`);
    } else {
      licenseURL = "";
      setStatus(`❌ Upload failed.`);
    }
    checkFormCompletion();
  } catch (err) {
    licenseURL = "";
    setStatus(`❌ Error uploading image: ${err.message || err}`);
    checkFormCompletion();
  }
});

function autoFormatDateField(field) {
  field.addEventListener('input', function (e) {
    let v = e.target.value.replace(/\D/g, '').slice(0,8);
    if (v.length >= 5) v = v.slice(0,2) + '/' + v.slice(2,4) + '/' + v.slice(4);
    else if (v.length >= 3) v = v.slice(0,2) + '/' + v.slice(2);
    e.target.value = v;
    checkFormCompletion();
  });
}
autoFormatDateField(document.getElementById('dob'));
autoFormatDateField(document.getElementById('date'));

function generateBBCodeString() {
  const fullname = document.getElementById('fullname').value.trim();
  const gender = document.getElementById('gender').value;
  const dob = document.getElementById('dob').value.trim();
  const address = document.getElementById('address').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const date = document.getElementById('date').value.trim();
  const signame = document.getElementById('signame').value.trim();
  const licenseField = licenseURL || 'ISI SS LISENSI KALIAN DISINI';

  return `[divbox=white][align=center][img]https://i.imgur.com/ZGWFDMR.png[/img]
[/align]
[divbox=grey][color=white][align=center]PERSONAL INFORMATION[/align][/color][/divbox]
[list=none]
[b]1.[/b] FULL NAME [b]:[/b]
[list=none]
${fullname}
[/list]
[b]2.[/b] GENDER [b]:[/b]
[list=none]
${gender}
[/list]
[b]3.[/b] DATE OF BIRTH [b]:[/b]
[list=none]
${dob}
[/list]
[b]4.[/b] ADDRESS [b]:[/b]
[list=none]
${address}
[/list]
[b]5.[/b] PHONE NUMBER [b]:[/b]
[list=none]
${phone}
[/list]
[b]6.[/b] LICENSES [b]:[/b]
[list=none][img]${licenseField}[/img][/list]
[/list]

Los Santos, ${date}

[i]${signame}[/i][/divbox]
[divbox=white][divbox=grey][color=white][align=center]LICENSE APPLICATION DECLARATION [size=1][color=transparant]((ISI DUA-DUANYA))[/color][/size][/align][/color][/divbox]

[list=none][b]Deklarasi:[/b]
[quote]Saya, (${fullname}), sudah membaca halaman [url=https://police-state.site/viewtopic.php?t=6]GCLU Hours[/url] dengan benar dan tahu pada jam berapa saja saya harus datang. 
Saya, (${fullname}) juga setuju bahwa jika saya [b]MASIH[/b] menggunakan [i]666 / 911[/i] untuk menanyakan sesuatu yang sudah tertera di GCLU Hours, saya akan menerima konsekuensi, yaitu [b]form saya ditolak secara langsung[/b].[/quote]

[list=none][b]Declaration:[/b]
[quote]I, (${fullname}), have read and understood the [url=https://police-state.site/viewtopic.php?t=6]GCLU Hours[/url] page and know at what time should I come.
I, (${fullname}), have agreed that my form will be [b]DENIED immediately[/b] should I still ask about something that has already been informed over GCLU Hours, over the 666/911 hotline.[/quote]

Los Santos, ${date}
[u]${signame}[/u][/divbox]`;
}

// === Tombol Convert dan Copy ===
const convertBtn = document.getElementById('btnConvert');
const copyBtn = document.getElementById('btnCopy');

convertBtn.addEventListener('click', function () {
  const out = generateBBCodeString();
  document.getElementById('result').textContent = out;
});

copyBtn.addEventListener('click', function () {
  const txt = document.getElementById('result').textContent;
  if (!txt) { alert('Tidak ada BBCode untuk di-copy — tekan Convert terlebih dahulu.'); return; }
  navigator.clipboard.writeText(txt).then(()=> {
    copyBtn.textContent = 'Copied ✓';
    setTimeout(()=> copyBtn.textContent = 'Copy BBCode', 1000);
  });
});

// === Periksa apakah semua field sudah diisi ===
const requiredFields = ['fullname','gender','dob','address','phone','date','signame'];
requiredFields.forEach(id => {
  document.getElementById(id).addEventListener('input', checkFormCompletion);
});

function checkFormCompletion() {
  let allFilled = true;
  requiredFields.forEach(id => {
    const el = document.getElementById(id);
    if (!el.value.trim()) allFilled = false;
  });
  if (!licenseURL) allFilled = false;

  convertBtn.disabled = !allFilled;
  convertBtn.style.opacity = allFilled ? "1" : "0.5";
  convertBtn.style.cursor = allFilled ? "pointer" : "not-allowed";
}

// === Matikan tombol convert saat awal ===
document.addEventListener('DOMContentLoaded', () => {
  convertBtn.disabled = true;
  convertBtn.style.opacity = "0.5";
});
</script>
</script>
<!-- POPUP VIDEO TUTORIAL (harus ditonton sampai selesai) -->
<div id="videoPopup" class="popup-overlay">
  <div class="popup-card">
    <div class="popup-header">
      <img src="https://sapdssrp.github.io/assets/brand/sapd.png" alt="SAPD" class="popup-logo">
      <h2>Watch the Tutorial Before Proceeding</h2>
    </div>
    <p class="popup-desc">
      Tonton videonya agar bisa menekan tombol close.
    </p>

    <div class="video-box">
      <div id="player"></div>
    </div>

    <button id="closePopup" disabled class="disabled-btn">Close</button>
    <p id="note" class="note">Jangan lupa subcribe ya :) </p>
  </div>
</div>

<style>
/* === Popup Styles === */
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.popup-card {
  background: #0f1b2b;
  border-radius: 12px;
  padding: 22px;
  width: 90%;
  max-width: 560px;
  text-align: center;
  color: #eaf6ff;
  box-shadow: 0 0 20px rgba(0,0,0,0.6);
}
.popup-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}
.popup-logo {
  width: 64px;
  height: 64px;
}
.popup-card h2 {
  margin: 0;
  font-size: 18px;
  color: #9fb2c8;
}
.popup-desc {
  font-size: 13px;
  color: #9fb2c8;
  margin-bottom: 12px;
}
.video-box {
  position: relative;
  width: 100%;
  padding-top: 56.25%; /* 16:9 */
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 16px;
}
.video-box iframe,
#player {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
}
#closePopup {
  background: #1e90ff;
  color: #021d35;
  border: none;
  border-radius: 8px;
  padding: 10px 18px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
}
#closePopup.disabled-btn {
  opacity: 0.5;
  cursor: not-allowed;
}
.note {
  margin-top: 8px;
  color: #9fb2c8;
  font-size: 12px;
}
</style>

<!-- === YouTube IFrame API === -->
<script src="https://www.youtube.com/iframe_api"></script>

<script>
let player;

function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '315',
    width: '560',
    videoId: 'QqTvaQ8j1Po', // <<-- Video kamu
    playerVars: { 'controls': 1, 'disablekb': 1 },
    events: {
      'onStateChange': onPlayerStateChange
    }
  });
}

function onPlayerStateChange(event) {
  const closeBtn = document.getElementById('closePopup');
  if (event.data === YT.PlayerState.ENDED) {
    closeBtn.disabled = false;
    closeBtn.classList.remove('disabled-btn');
    document.getElementById('note').textContent = "✅ Kamu bisa tutup notifikasi ini.";
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const popup = document.getElementById('videoPopup');
  const closeBtn = document.getElementById('closePopup');

  closeBtn.addEventListener('click', () => {
    if (!closeBtn.disabled) popup.style.display = 'none';
  });
});
</script>

</body>
</html>
